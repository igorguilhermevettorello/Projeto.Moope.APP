<div class="container mt-3">
  <div class="row">
    <div class="col-12">
      <h4>{{ isEditMode ? 'Editar Plano' : 'Adicionar Plano' }}</h4>
      
      <!-- Navegação das abas -->
      <ul class="nav nav-tabs" id="planoTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button 
            class="nav-link active" 
            type="button">
            <i class="bi bi-card-list"></i>
            Dados do Plano
            <i class="bi bi-check-circle-fill text-success ms-1" *ngIf="planoForm.valid"></i>
          </button>
        </li>
      </ul>

      <form [formGroup]="planoForm" (ngSubmit)="salvar()">
        
        <!-- Aba Dados do Plano -->
        <div class="tab-content">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="codigo" class="form-label">Código *</label>
              <input 
                type="text" 
                class="form-control form-control-sm" 
                [class.is-invalid]="codigo?.invalid && codigo?.touched"
                id="codigo" 
                placeholder="Digite o código do plano"
                formControlName="codigo"
                required>
              <div class="invalid-feedback" *ngIf="codigo?.invalid && codigo?.touched">
                <div *ngIf="codigo?.errors?.['required']">Código é obrigatório</div>
              </div>
            </div>

            <div class="col-md-6 mb-3">
              <label for="valor" class="form-label">Valor *</label>
              <input
                type="text"
                class="form-control form-control-sm"
                [class.is-invalid]="valor?.invalid && valor?.touched"
                id="valor"
                placeholder="Digite o valor do plano"
                formControlName="valor"
                (input)="aplicarMascaraValor($event)"
                required>
              <div class="invalid-feedback" *ngIf="valor?.invalid && valor?.touched">
                <div *ngIf="valor?.errors?.['required']">Valor é obrigatório</div>
                <div *ngIf="valor?.errors?.['valorInvalido']">Valor deve ser maior que zero</div>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-12 mb-3">
              <label for="descricao" class="form-label">Descrição *</label>
              <input 
                type="text" 
                class="form-control form-control-sm" 
                [class.is-invalid]="descricao?.invalid && descricao?.touched"
                id="descricao" 
                placeholder="Digite a descrição do plano"
                formControlName="descricao"
                required>
              <div class="invalid-feedback" *ngIf="descricao?.invalid && descricao?.touched">
                <div *ngIf="descricao?.errors?.['required']">Descrição é obrigatória</div>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-12 mb-3">
              <div class="form-check">
                <input 
                  class="form-check-input" 
                  type="checkbox" 
                  id="status" 
                  formControlName="status">
                <label class="form-check-label" for="status">
                  Plano Ativo
                </label>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Botões de ação -->
        <div class="d-flex justify-content-end gap-2 mt-4">
          <button 
            type="button" 
            class="btn btn-secondary" 
            (click)="cancelar()"
            [disabled]="isLoading">
            Cancelar
          </button>
          <button 
            type="submit" 
            class="btn btn-primary" 
            [disabled]="planoForm.invalid || isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            {{ isEditMode ? 'Atualizar' : 'Salvar' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
